---
title: "PocketScore開発記 #1：Tauri v2でSQLiteデータベースをバックアップ・復元する"
description: "ミュージシャンのための楽譜管理アプリを開発中。SQLiteのバックアップ機能をRustで実装した記録です。"
pubDate: "2026-02-06"
---

# PocketScore開発記 #1：Tauri v2でSQLiteデータベースをバックアップ・復元する

ミュージシャンをしながら、エンジニアとして「自分のための道具」を作っています。
現在開発しているのは、PDF楽譜管理アプリ **「PocketScore」**。

今回は、Androidアプリとしても展開する上で避けて通れない**「データのポータビリティ（バックアップと復元）」**をTauri v2でどう実装したか、その備忘録を残します。

## なぜバックアップが必要か

PocketScoreは、プライバシーとオフラインでの動作を重視し、データはすべてローカルの **SQLite** に保存しています。
しかし、Androidアプリとして運用する場合、端末の紛失や機種変更への備えが必須です。ユーザーが自分のデータを「資産」として持ち出せる仕組みを目指しました。

## 実装のポイント：ZIP形式でのエクスポート

バックアップファイル（拡張子 `.pscore`）の実体は、SQLiteのDBファイルと設定ファイルを固めたZIPアーカイブです。

### Rust（Backend）での処理

Rustの `zip` クレートと `walkdir` を組み合わせ、アプリのデータディレクトリを圧縮するコマンドを実装しました。

（ここにRustのコードを挿入）
`// 例: zip::ZipWriter などを使用したアーカイブ作成`

### フロントエンド（React）での呼び出し

ユーザー体験を損なわないよう、保存完了時にトースト通知を出すなど工夫しています。

（ここにTypeScriptのコードを挿入）
`// 例: await invoke("export_pscore")`

## 生活の文脈の中で作るということ

最近は冷え込み、仕事の合間に豆炭を熾して暖を取りながらコードを書いています。

次は、Android実機でのビルドと広告実装について書く予定です。
